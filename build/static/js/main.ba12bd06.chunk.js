(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a.n(o),s=(a(51),a(53),a(55),a(8)),i=a(9),c=a(11),u=a(10),m=a(12),p=a(40),d=a(18),f=a(39),h=a(38),g=(a(57),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,this.props.children)}}]),t}(n.Component)),v=a(2),k=(a(79),function(e){return r.a.createElement(v.MDBContainer,{fluid:!0,className:"about-container"},r.a.createElement(v.Row,{style:{height:"100vh",alignItems:"center"},center:!0},r.a.createElement(v.Card,null,r.a.createElement(v.CardBody,null,r.a.createElement(v.CardTitle,{className:"display-4"},"My React first application"),r.a.createElement("p",{className:"h2-responsive"},"This small application was built in a week."),r.a.createElement("p",{className:"h3-responsive"},"Started on"),r.a.createElement("p",{className:"h4-responsive"},"19/11/2018"),r.a.createElement("p",{className:"h5-responsive"},"End on"),r.a.createElement("p",{className:"h4-responsive"},"26/11/2018"),r.a.createElement("p",{className:"h5-responsive"},"Updated on 07/12/2018"),r.a.createElement("p",{className:"h5-responsive"},"P.S: This is my first App ( \u0361\xb0 \u035c\u0296 \u0361\xb0)")))))}),b=(a(81),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClick=function(){a.setState({collapse:!a.state.collapse})},a.toggle=function(){a.setState({modal:!a.state.modal})},a.state={collapse:!1,isWideEnough:!1,modal:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(v.Navbar,{color:"black",dark:!0,expand:"lg"},r.a.createElement(v.Container,null,r.a.createElement(v.Modal,{className:"text-black",size:"lg",side:!0,position:"top",backdrop:!0,isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(v.ModalHeader,{className:"text-center",titleClass:"w-100",tag:"p",toggle:this.toggle},"Are you sure?"),r.a.createElement(v.ModalFooter,{className:"justify-content-center"},r.a.createElement(v.NavLink,{className:"btn btn-elegant",to:"/",onClick:this.toggle},"Close"),r.a.createElement(v.NavLink,{className:"btn btn-outline-danger waves-effect",to:"/logout"},"Log out"))),r.a.createElement(v.NavbarBrand,null,r.a.createElement("strong",{className:"white-text"},"Map Application")),r.a.createElement(v.NavbarToggler,{onClick:this.onClick}),r.a.createElement(v.Collapse,{isOpen:this.state.collapse,navbar:!0},r.a.createElement(v.NavbarNav,{left:!0},r.a.createElement(v.NavItem,null,r.a.createElement(v.NavLink,{exact:!0,to:"/"},"Map itself")),r.a.createElement(v.NavItem,null,r.a.createElement(v.NavLink,{to:"/about"},"About"))),r.a.createElement(v.NavbarNav,{right:!0},r.a.createElement(v.NavItem,null,r.a.createElement(v.NavLink,{to:"#!",onClick:this.toggle},"Logout"))))))}}]),t}(r.a.Component)),y=a(7);var E=function(e){var t=e.type||"text";return r.a.createElement("div",null,r.a.createElement(v.MDBInput,{label:e.label,type:t,value:e.value,onChange:e.onChange}),function(e){var t=e.valid,a=e.touched,n=e.shouldValidate;return e.value.length<=0?void 0:!t&&n&&a}(e)?r.a.createElement("span",null,e.errorMessage):null)},M=a(42),O=a.n(M),w=a(13),C=a(24),S=a.n(C),j=a(32),I="AUTH_SUCCESS",D="AUTH_LOGOUT",B="MAP_ZOOMIN",N="MAP_ZOOMOUT",x="MARKERS_ON",P="MARKERS_OFF",T="SET_CENTER",z="CURRENT_MARKERS";function _(e){return function(t){setTimeout(function(){t(U())},1e3*e)}}function U(){return localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expirationDate"),{type:D}}function A(e){return{type:I,token:e}}var L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isFormValid:!1,formControls:{email:{value:"",type:"email",label:"Enter your e-mail",errorMessage:"Enter correct e-mail adress (example@mail.com)",valid:!1,touched:!1,validation:{required:!0,email:!0}},password:{value:"",type:"password",label:"Enter your password",errorMessage:"Enter at least 6 characters",valid:!1,touched:!1,validation:{required:!0,minLength:6}}}},a.submitHandler=function(e){e.preventDefault()},a.loginBtn=function(){a.state.formControls.password.valid&&a.state.formControls.email.valid&&a.props.auth(a.state.formControls.email.value,a.state.formControls.password.value,!0)},a.registerBtn=function(){a.state.formControls.password.valid&&a.state.formControls.email.valid&&a.props.auth(a.state.formControls.email.value,a.state.formControls.password.value,!1)},a.onChangeHandler=function(e,t){var n=Object(y.a)({},a.state.formControls),r=Object(y.a)({},n[t]);r.value=e.target.value,r.touched=!0,r.valid=a.validateControl(r.value,r.validation),n[t]=r;var o=!0;Object.keys(n).forEach(function(e){o=n[e].valid&&o}),a.setState({formControls:n,isFormValid:o})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"validateControl",value:function(e,t){if(!t)return!0;var a=!0;return t.required&&(a=""!==e.trim()&&a),t.email&&(a=O.a.email(e)&&a),t.minLength&&(a=e.length>=t.minLength&&a),a}},{key:"renderInputs",value:function(){var e=this;return Object.keys(this.state.formControls).map(function(t,a){var n=e.state.formControls[t];return r.a.createElement(E,{key:t+a,type:n.type,value:n.value,valid:n.valid,touched:n.touched,label:n.label,shouldValidate:!!n.validation,errorMessage:n.errorMessage,onChange:function(a){return e.onChangeHandler(a,t)}})})}},{key:"render",value:function(){return r.a.createElement(v.Animation,{type:"fadeIn",count:1},r.a.createElement(v.MDBContainer,{style:{padding:"20px"}},r.a.createElement(v.MDBRow,null,r.a.createElement(v.MDBCol,{className:"mt-5",xl:"12"},r.a.createElement(v.MDBCard,null,r.a.createElement(v.MDBCardBody,{className:"mx-4"},r.a.createElement("p",{className:"h1-responsive text-center mb-4"},"Authorization"),r.a.createElement("form",{onSubmit:this.submitHandler},this.renderInputs(),r.a.createElement(v.MDBRow,{center:!0},r.a.createElement(v.MDBBtn,{onClick:this.loginBtn,color:"dark-green",size:"md"},"Sign In"),r.a.createElement(v.MDBBtn,{onClick:this.registerBtn,color:"mdb-color",size:"md"},"Sign up")))))))))}}]),t}(n.Component);var R=Object(w.b)(null,function(e){return{auth:function(t,a,n){return e(function(e,t,a){return function(){var n=Object(j.a)(S.a.mark(function n(r){var o,l;return S.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o={email:e,password:t,returnSecureToken:!0},l="https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=AIzaSyBMLU3d72yGqRdNb3GOmqW53m3yjCHBJ7k",a&&(l="https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyBMLU3d72yGqRdNb3GOmqW53m3yjCHBJ7k"),Object(j.a)(S.a.mark(function e(){var t,a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l,{method:"POST",body:JSON.stringify(o)});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=new Date((new Date).getTime()+1e3*a.expiresIn),localStorage.setItem("token",a.idToken),localStorage.setItem("userId",a.localId),localStorage.setItem("expirationDate",n),r(A(a.idToken)),r(_(a.expiresIn));case 12:case"end":return e.stop()}},e,this)}))();case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}(t,a,n))}}})(L),W=a(21);function H(e){return function(t){t(!0===e?{type:B}:{type:N})}}function G(e){return function(t){t(!0===e?{type:x}:{type:P})}}function V(e){return function(t){t(function(e){return{type:T,center:e}}(e))}}function q(e){return function(t){t(function(e){return{type:z,markers:e}}(e))}}var F=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(v.MDBRow,null,r.a.createElement(v.MDBCol,{xl:"12",style:{height:"100vh",padding:"0px"}},this.props.children))}}]),t}(n.Component),J=Object(W.GoogleApiWrapper)({apiKey:"AIzaSyDfXMtNQ9WiZVSmJx8FI0EwzFKhyzwM6vg&libraries=places",language:"ru"})(F),Z=(a(99),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={google:"",scrollwheel:!1,disableDefaultUI:!0,currentMarker:[],markersPosition:[],showingInfoWindow:!1,activeMarker:{},selectedPlace:{},currentUserId:localStorage.getItem("userId"),markersCopy:[],dataBase:[],saveStatus:"Save Markers",toggleStatus:"No Markers"},a.onMapChange=function(e,t,n){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null});var r={lat:n.latLng.lat(),lng:n.latLng.lng()},o=a.state.markersPosition;o.push(r),a.setState({markersPosition:o,markersCopy:o,currentMarker:r,toggleStatus:"Turn Off Markers"})},a.zoomInMap=function(){a.props.zoomMap(!0)},a.zoomOutMap=function(){a.props.zoomMap(!1)},a.onMarkerClick=function(e,t){return a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.turnOffOn=function(){!1===a.props.toggle?(a.props.toggleMarkers(!0),a.setState({markersPosition:[],toggleStatus:"Turn On Markers"})):(a.props.toggleMarkers(!1),a.setState({markersPosition:a.state.markersCopy,toggleStatus:"Turn Off Markers"}))},a.loadMarkers=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=a.state.dataBase[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var l=r.value;if(l.userId===a.state.currentUserId){var s=l.geo.concat(a.state.markersPosition);a.setState({markersPosition:s,markersCopy:s,toggleStatus:"Turn Off Markers"}),a.props.toggleMarkers(!1)}}}catch(i){t=!0,n=i}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},a.saveMarkers=function(){var e=a.state.dataBase;if(e.length<=0)return e.push({userId:a.state.currentUserId,geo:a.state.markersPosition}),a.setState({dataBase:e}),void a.update();if(e.length>0){var t=!0,n=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var s=o.value;if(s.userId===a.state.currentUserId)return s.geo=a.state.markersPosition,void a.update()}}catch(d){n=!0,r=d}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}var i=!0,c=!1,u=void 0;try{for(var m,p=e[Symbol.iterator]();!(i=(m=p.next()).done);i=!0){if(m.value.userId!==a.state.currentUserId)return e.push({userId:a.state.currentUserId,geo:[a.state.markersPosition]}),a.setState({dataBase:e}),void a.update()}}catch(d){c=!0,u=d}finally{try{i||null==p.return||p.return()}finally{if(c)throw u}}}},a.onChooseHandler=function(e){if("None"===e.target.value||void 0===e.target.value)a.setState({markersPosition:""});else if(""!==e.target.value){var t=a.state.google,n=a.props.currentCenter,r=new t.maps.Map("",{center:n}),o={location:n,radius:"1000",type:e.target.value},l=[];new t.maps.places.PlacesService(r).nearbySearch(o,a.results=function(e){var t=!0,n=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var i=o.value;l.push({lat:i.geometry.location.lat(),lng:i.geometry.location.lng(),name:i.name,icon:i.icon,rating:i.rating})}}catch(c){n=!0,r=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}a.setState({markersPosition:l})})}},a.centerMoved=function(e,t){var n={lat:t.center.lat(),lng:t.center.lng()};a.props.setCenter(n)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"setMarker",value:function(){var e=this;return Object.keys(this.state.markersPosition).map(function(t,a){var n=e.state.markersPosition[t];return r.a.createElement(W.Marker,{onClick:e.onMarkerClick,title:n.name,position:n,name:n.name,key:a,icon:n.icon})})}},{key:"update",value:function(){var e=this;fetch("https://api.jsonbin.io/b/5bfaab94bd6fba76967fbddf",{method:"PUT",body:JSON.stringify(this.state.dataBase),headers:{"Content-type":"application/json"}}).then(function(t){t.status>200?e.setState({saveStatus:"Saving..."}):200===t.status&&(e.setState({saveStatus:"Markers Saved"}),setTimeout(function(){e.setState({saveStatus:"Save Markers"})},1e3))}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.state.markersPosition.length<=0&&""!==this.props.markers&&this.setState({markersPosition:this.state.markersPosition.concat(this.props.markers)}),this._isMounted=!0,fetch("https://api.jsonbin.io/b/5bfaab94bd6fba76967fbddf/latest",{method:"GET",headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e._isMounted&&e.setState({dataBase:t})}).catch(function(e){console.log(e)}),this.setMarker()}},{key:"componentWillUnmount",value:function(){this.props.currentMarkers(this.state.markersPosition),this._isMounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement(v.MDBContainer,{fluid:!0,style:{padding:"0px"}},r.a.createElement(v.MDBContainer,{fluid:!0,style:{position:"absolute",zIndex:"100",padding:"0px"}},r.a.createElement(v.MDBRow,{center:!0},r.a.createElement(v.MDBBtn,{color:"mdb-color",onClick:this.zoomInMap},"ZoomIn"),r.a.createElement(v.MDBBtn,{color:"mdb-color",onClick:this.zoomOutMap},"ZoomOut"),r.a.createElement(v.MDBBtn,{color:"mdb-color",onClick:this.turnOffOn},this.state.toggleStatus),r.a.createElement(v.MDBBtn,{color:"mdb-color",onClick:this.loadMarkers},"Load Markers"),r.a.createElement(v.MDBBtn,{color:"mdb-color",onClick:this.saveMarkers},this.state.saveStatus,r.a.createElement(v.MDBBadge,{color:"info",pill:!0,style:{marginLeft:"5px",marginBottom:"5px"}},this.state.markersPosition.length)),r.a.createElement(v.MDBDropdown,{style:{display:"inline-flex"},onClick:this.onChooseHandler},r.a.createElement(v.MDBDropdownToggle,{caret:!0,color:"mdb-color",defaultValue:this.state.currentSelected},"Select type"),r.a.createElement(v.MDBDropdownMenu,null,r.a.createElement(v.MDBDropdownItem,{value:"None"},"None"),r.a.createElement(v.MDBDropdownItem,{value:"gas_station"},"Gas stations"),r.a.createElement(v.MDBDropdownItem,{value:"pharmacy"},"Pharmacies"),r.a.createElement(v.MDBDropdownItem,{value:"school"},"Schools"),r.a.createElement(v.MDBDropdownItem,{value:"restaurant"},"Restaurants"))))),r.a.createElement(J,null,r.a.createElement(W.Map,{onDragend:this.centerMoved,disableDoubleClickZoom:!0,scrollwheel:!1,onReady:function(t){return e.setState({google:t.google})},google:window.google,zoom:this.props.zoom,className:"map",initialCenter:this.props.currentCenter,disableDefaultUI:!0,onClick:this.onMapChange},this.setMarker(this.props.markers),r.a.createElement(W.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,r.a.createElement("h1",null,this.state.selectedPlace.name))))))}}]),t}(n.Component));var K=Object(w.b)(function(e){return{zoom:e.zoom.zoom,toggle:e.toggle.toggleMarkers,currentCenter:e.center.center,markers:e.markers.markers}},function(e){return{zoomMap:function(t){return e(H(t))},toggleMarkers:function(t){return e(G(t))},setCenter:function(t){return e(V(t))},currentMarkers:function(t){return e(q(t))}}})(Z),X=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return r.a.createElement(f.a,{to:"/"})}}]),t}(n.Component);var Q=Object(w.b)(null,function(e){return{logout:function(){return e(U())}}})(X),Y=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.autoLogin()}},{key:"render",value:function(){var e,t=r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/auth",component:R}),r.a.createElement(f.a,{to:"/auth"}));return this.props.isAuthenticated&&(t=r.a.createElement(p.a,null,r.a.createElement(d.a,{path:"/",exact:!0,component:K}),r.a.createElement(d.a,{path:"/about",component:k}),r.a.createElement(d.a,{path:"/logout",component:Q}),r.a.createElement(f.a,{to:"/"})),e=r.a.createElement(b,null)),r.a.createElement(g,null,e,t)}}]),t}(n.Component);var $=Object(h.a)(Object(w.b)(function(e){return{isAuthenticated:!!e.auth.token}},function(e){return{autoLogin:function(){return e(function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(U()):(e(A(t)),e(_((a.getTime()-(new Date).getTime())/1e3)))}else e(U())})}}})(Y)),ee=a(20),te=a(15),ae={token:null};var ne={zoom:15};var re={toggleMarkers:!1};var oe={center:{lat:46.482753,lng:30.735552}};var le={markers:""};var se=Object(te.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(y.a)({},e,{token:t.token});case D:return Object(y.a)({},e,{token:null});default:return e}},zoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;switch((arguments.length>1?arguments[1]:void 0).type){case B:return Object(y.a)({},e,{zoom:e.zoom+1});case N:return Object(y.a)({},e,{zoom:e.zoom-1});default:return e}},toggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;switch((arguments.length>1?arguments[1]:void 0).type){case x:return Object(y.a)({},e,{toggleMarkers:!0});case P:return Object(y.a)({},e,{toggleMarkers:!1});default:return e}},center:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(y.a)({},e,{center:t.center});default:return e}},markers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(y.a)({},e,{markers:t.markers});default:return e}}}),ie=a(45),ce="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):te.d,ue=Object(te.e)(se,ce(Object(te.a)(ie.a))),me=r.a.createElement(w.a,{store:ue},r.a.createElement(ee.a,null,r.a.createElement($,null)));l.a.render(me,document.getElementById("root"))},46:function(e,t,a){e.exports=a(101)},57:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},99:function(e,t,a){}},[[46,2,1]]]);
//# sourceMappingURL=main.ba12bd06.chunk.js.map